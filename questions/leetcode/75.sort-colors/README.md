# 75.颜色分类

<https://leetcode-cn.com/problems/sort-colors/description/>

给定一个包含红色、白色和蓝色，一共 `n` 个元素的数组，[原地](https://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95)对它们进行排序，使得相同颜色的元素相邻，并按照红色、白色、蓝色顺序排列。

此题中，我们使用整数 `0`、 `1` 和 `2` 分别表示红色、白色和蓝色。

示例 1：

```txt
输入：nums = [2,0,2,1,1,0]
输出：[0,0,1,1,2,2]
```

示例 2：

```txt
输入：nums = [2,0,1]
输出：[0,1,2]
```

示例 3：

```txt
输入：nums = [0]
输出：[0]
```

示例 4：

```txt
输入：nums = [1]
输出：[1]
```

提示：

- `n == nums.length`
- `1 <= n <= 300`
- `nums[i]` 为 `0`、`1` 或 `2`

进阶：

- 你可以不使用代码库中的排序函数来解决这道题吗？
- 你能想出一个仅使用常数空间的一趟扫描算法吗？

## 总结

条件

- 【TODO】

分析

- 【TODO】
  - 借鉴快排的“维护有序区间”的思想，开辟至少两个有序区间并不断扩展维护，直到两个有序区间扩展到极限，将所有属于该区间的元素都吸纳进来后，剩下的那个原本无序的区间也会变成有序区间

### 断言区间

分析

- 【TODO】
  - 在数组的头部开辟两个向尾部扩展的有序区间，一个是纯0区间，一个是纯1区间，遍历到0就和0区间尾交换，遍历到1就和1区间尾交换，交换后遍历迭代到下一步
  - 需要注意的是，1区间是堆叠在0区间后面的，因此当1区间非空时，扩展0区间会把1区间的元素交换出来。为了避免这个问题，当1区间非空时，交换0元素后，还要把交换出来的1再跟1区间尾元素交换

实现

```TODO
```

复杂度

- 时间：O(TODO)
- 空间：O(TODO)

### 断言区间

分析

- 【TODO】
  - 在数组的头部开辟向尾部扩展的纯0区间，在数组尾部开辟向头部扩展纯2区间，遍历到0就和0区间尾交换，遍历到2就和2区间尾交换，交换后遍历迭代到下一步
  - 令$p_0$代表0区间尾，$p_2$代表2区间尾，$i$代表遍历指针，则：
    - $p_0 \leq i \leq p_2$必然成立
    - 对于$a_i$的值：
      - $a_i = 0$
        - $i = p_0$：遍历元素紧邻0区间，发现的0就在0区间下一次扩展要使用的空间中，此时交换相当于直接扩展0区间
        - $i > p_0$：遍历元素和0区间之间穿插了许多1，此时交换相当于把紧邻0区间、占用了0区间下一次扩展空间的1和遍历发现的0交换
      - $a_i = 2$

        2区间不像0区间那样隐含了约束“遍历元素与0区间之间只有1（纯1有序区间）”，因此遍历元素可能与紧邻2区间的非1元素（$a_{p2-1}=0或2$）进行了交换

        - $a_{p2-1} = 2$：此时需要不断循环遍历元素并同时扩展2区间直到遍历到非2元素（0或1）。需要注意的是，遇到0元素还要将其添加到0区间
        - $a_{p2-1} = 0$：此时不能直接遍历下一个元素，需要将0元素添加到0区间

实现

```TODO
```

复杂度

- 时间：O(TODO)
- 空间：O(TODO)
